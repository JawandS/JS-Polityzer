(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi||[]).push([[5475],{47398:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return L}});var n=o(93173),r=o(23788),i=o(27762),a=o.n(i),s=o(88677),l=o.n(s),p=o(13775),d=o(60216),u=o.n(d),c=o(40841),f=o.n(c),h=o(4637),m=o(76939),y=o(98977),b=o(78905),g=o(17607),v=o(68631),w=(o(23215),o(87308),o(51845),function(e,t){if(void 0===t&&(t={}),"object"==typeof e){if(t&&t.getVideoUrl)return t.getVideoUrl(e);console.error("must set getVideoUrl in plugin config when using custom video source!",e)}return e});function D(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var V=Object.defineProperty,x=Object.defineProperties,R=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,O=function(e,t,o){return t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o},U=function(e,t){for(var o in t||(t={}))S.call(t,o)&&O(e,o,t[o]);if(P)for(var n,r=D(P(t));!(n=r()).done;){o=n.value;$.call(t,o)&&O(e,o,t[o])}return e},C=function(e,t,o){return O(e,"symbol"!=typeof t?t+"":t,o),o},L=function(e){function t(t){var o;o=e.call(this,t)||this,C((0,n.Z)(o),"setUrl",(function(e){var t,n,r=o.normalizeUrl(e);r!==o.state.url&&(o.setState({url:r}),null==(n=(t=o.props).onReload)||n.call(t))})),C((0,n.Z)(o),"normalizeUrl",(function(e){return 0===e.toLowerCase().indexOf("vimeo")?"https://"+e:e})),C((0,n.Z)(o),"findFormalVideoRatio",(function(e){var t,o=[1,5/4,4/3,1.5,1.6,16/9,1.85,2,2.35,2.39,3],n=[].concat(o,o.map((function(e){return 1/e}))),r=(t=e,n.reduce((function(e,o){return Math.abs(o-t)<Math.abs(e-t)?o:e})));return Math.abs(r-e)>.01?e:r})),C((0,n.Z)(o),"onReactPlayerReady",(function(e){var t,n;o.props.isLoaded||(null==(n=(t=o.props).onReady)?void 0:n.call(t,e))||o.setState({isLoaded:!0})})),C((0,n.Z)(o),"handleContextMenu",(function(e){return o.props.componentData.disableDownload&&e.preventDefault()})),C((0,n.Z)(o),"disableDownloadProps",(function(){var e=o.props,t=e.componentData,n=e.settings,r={config:{file:{attributes:{controlsList:"nodownload"}}}},i={};return void 0!==t.disableDownload?i=t.disableDownload?r:{}:void 0!==n.disableDownload&&(i=n.disableDownload?r:{}),i})),C((0,n.Z)(o),"onProgress",(function(e){var t,n,r=o.props,i=r.settings,a=r.blockKey;null==(t=i.onProgress)||t.call(i,(n=U({},e),x(n,R({id:a}))))})),(0,h.Gu)(t.componentData,b),o.state={url:void 0,isLoaded:!1,isVideoWrapperAttachedToDom:!1};var r=w(t.componentData.src,t.settings);return"string"==typeof r?o.state={url:o.normalizeUrl(r)}:r&&"function"==typeof r.then&&r.then((function(e){return o.setState({url:o.normalizeUrl(e)})})),o}(0,r.Z)(t,e);var o=t.prototype;return o.componentWillReceiveProps=function(e){var t=this;if(!(0,g.isEqual)(e.componentData,this.props.componentData)&&((0,h.Gu)(e.componentData,b),!(0,g.isEqual)(e.componentData.src,this.props.componentData.src))){var o=w(e.componentData.src,e.settings);"string"==typeof o?this.setUrl(o):o&&"function"==typeof o.then&&o.then((function(e){return t.setUrl(e)}))}},o.componentDidMount=function(){this.setState({key:"mounted"})},o.componentDidUpdate=function(){if(!this.state.isVideoWrapperAttachedToDom){var e=this.getVideoRatio();e&&(this.setVideoRatio(e.ratio,e.wrapper),this.setState({isVideoWrapperAttachedToDom:!0}))}},o.getVideoRatio=function(){var e,t=null==(e=l().findDOMNode(this))?void 0:e.parentNode;if(t){var o=t.querySelector("iframe, video");if(o){var n=o.clientHeight/o.clientWidth;return isNaN(n)?void 0:{ratio:n,wrapper:t}}}},o.setVideoRatio=function(e,t){t.style["padding-bottom"]=100*e+"%"},o.render=function(){var e=this.props,t=e.theme,o=e.width,n=e.height,r=e.disabled,i=e.setComponentUrl,s=e.onDuration,l=e.settings,d=e.muted,u=e.componentData,c=e.seoMode;this.styles=this.styles||(0,m.y)({styles:v.s,theme:t});var h=this.state,b=h.url,g=h.key;null==i||i(b);var w=this.props.isLoaded||this.state.isLoaded,D="object"==typeof u.src,j=(0,y.y)()&&c,V=u.options||{},x=V.autoPlay,R=void 0!==x&&x,P=V.playInLoop,S=void 0!==P&&P,$=V.showControls,O=void 0===$||$,C=U({url:b,onReady:this.onReactPlayerReady,disabled:r,width:o,height:n,key:g,onDuration:s,onProgress:this.onProgress,progressInterval:l.progressInterval||1e3,muted:d||R,isLoaded:w,autoPlay:R,loop:S,isCustomVideo:D},this.disableDownloadProps());return j?a().createElement(p.I,{isCustomVideo:D,url:b}):a().createElement(p.R,U({className:f()(this.styles.video_player),onContextMenu:this.handleContextMenu,controls:!1!==this.props.isLoaded&&O},C))},t}(i.Component);L.propTypes={componentData:u().object.isRequired,onStart:u().func,width:u().string,height:u().string,settings:u().object.isRequired,theme:u().object.isRequired,disabled:u().bool,setComponentUrl:u().func,onReady:u().func,isLoaded:u().bool,onReload:u().func,onDuration:u().func,blockKey:u().string,muted:u().bool,seoMode:u().bool},L.defaultProps={width:"100%",height:"100%"}},45503:function(){},78905:function(e){"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://wix-rich-content/video-content-data-schema.json","type":"object","properties":{"src":{"oneOf":[{"$id":"/properties/src","type":"string","title":"Video Source URL","examples":["https://www.youtube.com/watch?v=eqZVIiD6wSg"]},{"$id":"/properties/src","type":"object","properties":{"pathname":{"$id":"/properties/src/pathname","type":"string","title":"Video Source Pathname","examples":["video-sample/jellyfish-25-mbps-hd-hevc.mp4"]},"thumbnail":{"$id":"/properties/src/thumbnail","type":"object","properties":{"pathname":{"$id":"/properties/src/thumbnail/pathname","type":"string","title":"Video Thumbnail Pathname","examples":["media/441c23_84f5c058e5e4479ab9e626cd5560a21bf002.jpg"]},"height":{"$id":"/properties/src/thumbnail/height","type":"integer","title":"Video Thumbnail Height","examples":[1080]},"width":{"$id":"/properties/src/thumbnail/width","type":"integer","title":"Video Thumbnail Width","examples":[1920]}}}}}]},"isCustomVideo":{"$id":"/properties/isCustomVideo","type":"boolean","title":"Is Custom Video","default":false},"config":{"$id":"/properties/config","type":"object","title":"configuration","properties":{"size":{"$id":"/properties/config/properties/size","enum":["content","small","fullWidth"],"title":"Size","default":"large","examples":["content","small","fullWidth"]},"alignment":{"$id":"/properties/config/properties/alignment","enum":["left","right","center"],"title":"Alignment","default":"center","examples":["left","right","center"]},"textWrap":{"$id":"/properties/config/properties/textWrap","type":"string","title":"Text Wrap","default":"nowrap","examples":["nowrap"]}}},"duration":{"$id":"/properties/duration","type":"number","title":"video duration","default":null}},"required":["src"]}')}}]);
//# sourceMappingURL=video-viewer.chunk.min.js.map